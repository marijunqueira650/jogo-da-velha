<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jogo da Velha — Simples</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--accent:#2b6cb0;--ok:#2f855a;--muted:#666;}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg);color:#111}
    .wrap{width:360px;max-width:95%;padding:20px;background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(15,23,42,0.08);text-align:center}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 16px;color:var(--muted);font-size:14px}
    .board{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:12px 0}
    .cell{
      background:linear-gradient(180deg,#fff,#f3f7ff);
      border-radius:8px;
      height:92px;display:flex;align-items:center;justify-content:center;
      font-size:36px;font-weight:700;cursor:pointer;border:1px solid rgba(2,6,23,0.06);
      user-select:none;
    }
    .cell:disabled{cursor:default;opacity:0.9}
    .status{margin-top:10px;font-weight:600}
    .controls{display:flex;gap:8px;justify-content:center;margin-top:14px}
    button{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
    button.secondary{background:#e2e8f0;color:#111}
    .win{color:var(--ok)}
    small{display:block;margin-top:8px;color:var(--muted)}
    @media (max-width:380px){ .cell{height:72px;font-size:30px} }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Jogo da Velha">
    <h1>Jogo da Velha</h1>
    <p class="lead">Jogue contra outro jogador localmente. Quem fizer 3 em linha vence.</p>

    <div id="board" class="board" aria-label="Tabuleiro do jogo">
      <!-- 9 células geradas por JavaScript -->
    </div>

    <div id="status" class="status">Turno: <strong id="turn">X</strong></div>

    <div class="controls">
      <button id="restartBtn">Reiniciar</button>
      <button id="autoReset" class="secondary">Reset automático: ON</button>
    </div>

    <small>Dica: clique sobre uma casa para jogar. Reinicie a qualquer momento.</small>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const turnEl = document.getElementById('turn');
    const statusEl = document.getElementById('status');
    const restartBtn = document.getElementById('restartBtn');
    const autoResetBtn = document.getElementById('autoReset');

    let board = Array(9).fill('');
    let current = 'X';
    let running = true;
    let autoReset = true;

    const winLines = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    // cria células
    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const btn = document.createElement('button');
        btn.className = 'cell';
        btn.setAttribute('data-index', i);
        btn.setAttribute('aria-label', 'Casa ' + (i+1));
        btn.addEventListener('click', onCellClick);
        boardEl.appendChild(btn);
      }
    }

    function onCellClick(e){
      const idx = Number(e.currentTarget.dataset.index);
      if(!running) return;
      if(board[idx] !== '') return;

      board[idx] = current;
      e.currentTarget.textContent = current;

      const result = checkGame();
      if(result) {
        running = false;
        if(result.winner){
          statusEl.innerHTML = `<span class="win">Vencedor: ${result.winner}</span>`;
        } else {
          statusEl.textContent = 'Empate!';
        }
        if(autoReset) setTimeout(resetGame, 1800);
        return;
      }

      // troca turno
      current = current === 'X' ? 'O' : 'X';
      turnEl.textContent = current;
    }

    function checkGame(){
      // verificar vitória
      for(const line of winLines){
        const [a,b,c] = line;
        if(board[a] && board[a] === board[b] && board[b] === board[c]){
          highlightWin(line);
          return { winner: board[a], line };
        }
      }
      // verificar empate
      if(board.every(cell => cell !== '')) return { winner: null };
      return null; // continuar
    }

    function highlightWin(line){
      // marca as células vitoriosas visualmente
      line.forEach(i => {
        const btn = boardEl.querySelector(`[data-index="${i}"]`);
        if(btn) btn.style.background = 'linear-gradient(90deg,#def7ec,#bbf7d0)';
      });
    }

    function resetGame(){
      board = Array(9).fill('');
      current = 'X';
      running = true;
      turnEl.textContent = current;
      statusEl.textContent = 'Turno:';
      createBoard();
    }

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    autoResetBtn.addEventListener('click', () => {
      autoReset = !autoReset;
      autoResetBtn.textContent = 'Reset automático: ' + (autoReset ? 'ON' : 'OFF');
      autoResetBtn.classList.toggle('secondary');
    });

    // inicializa
    createBoard();
  </script>
</body>
</html>
